{% extends "sharp/base.html" %}

{% block title %}Creating project... Please wait...{% endblock %}

{% block body %}
<div class="row">
	<div class="col s12 m6">
		<div class="card light-green accent-3">
			<div class="card-content">
				<span class="card-title">Creating new project... Please wait...</span>
				<p>This should take less then 5 seconds! If it takes more then 1 minute then try the retry button below</p>
			</div>
			<div class="card-action">
				<a href="/create/">Retry project creation</a>
			</div>
		</div>
	</div>
</div>
<center> <div class="preloader-wrapper active">
    <div class="spinner-layer spinner-blue-only">
      <div class="circle-clipper left">
        <div class="circle"></div>
      </div><div class="gap-patch">
        <div class="circle"></div>
      </div><div class="circle-clipper right">
        <div class="circle"></div>
      </div>
    </div>
  </div></center>
<script>
setTimeout(function(){
	var xhr = new XMLHttpRequest();
	xhr.open("get", "/create/do/", false);
	xhr.send();
	if(xhr.responseText.split("|")[0] == "ok"){
		document.location = "/projects/" + xhr.responseText.split("|")[1] + "/";
	}
}, 1000);
</script>
{% endblock %}